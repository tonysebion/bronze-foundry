environment: dev  # Target environment this pattern simulates
pattern_id: pattern1_full_events  # Unique identifier for tracing across source → bronze → silver
domain: retail_demo  # Business domain for the dataset (appears in sample paths)
system: retail_demo  # Logical system name used in Bronze/Silver metadata
entity: orders  # Table/entity name referenced throughout the fixtures

path_structure:
  sample_key: "sample"  # Folder prefix for pattern-specific snapshots
  system_key: "system"  # Bronze path component for system
  entity_key: "table"  # Bronze path component for entity
  date_key: "dt"  # Bronze path component for partition date
  silver_model_key: "silver_model"  # Silver sample hierarchy
  domain_key: "domain"
  load_date_key: "load_date"

bronze:
  enabled: true  # Bronze writes are required; full snapshots rewrite entire partition
  source_type: file  # Using filesystem-based sample data
  path_pattern: ./sampledata/source_samples/sample=pattern1_full_events/system=retail_demo/table=orders/dt=2025-11-13/full-part-0001.csv
  partition_column: run_date  # Column Bronze uses for partitioning metadata
  options:
    format: csv  # Source sample format (used when regenerating)
    load_pattern: full  # Load pattern label exposed via metadata
    pattern_folder: pattern1_full_events  # Directory under sampledata/bronze_samples
    max_rows_per_file: 250000  # Approximate file size threshold
    partitioning_strategy: date  # Hints how run dates map to partitions
    output_formats:
      # - csv  # Leave CSV commented out so only parquet is emitted
      - parquet

silver:
  enabled: true  # Programmatic Silver promotion is enabled for this pattern
  entity_kind: event  # This dataset behaves like an event log
  input_mode: replace_daily  # Each run rewrites the entire partition
  delete_mode: ignore
  schema_mode: allow_new_columns  # Silver tolerates new columns arriving over time
  natural_keys:
    - order_id
  event_ts_column: updated_at  # Primary timestamp for events
  attributes:
    - status
    - order_total
  partition_by:
    - event_ts_dt  # Derived partition column (e.g., event_date)
  # V1 Unified temporal configuration: partition by record time, not load time
  record_time_column: "updated_at"  # Column with event occurrence time
  record_time_partition: "event_date"  # Partition key name for event date
  load_batch_id_column: "load_batch_id"  # Standard column for batch tracking
