environment: dev
domain: retail_demo

system: retail_demo
entity: orders   # reuse the same entity so sample data paths line up

# Optional: Configure partition key names (defaults shown below)
# Omit this section entirely to use defaults
path_structure:
  sample_key: "sample"
  system_key: "system"
  entity_key: "table"
  date_key: "dt"
  silver_model_key: "silver_model"
  domain_key: "domain"
  load_date_key: "load_date"

bronze:
  enabled: true
  source_type: file
  path_pattern: ./sampledata/source_samples/pattern2_cdc_events/system=retail_demo/table=orders/pattern=pattern2_cdc_events/dt=2025-11-02/cdc-part-0001.csv
  partition_column: load_date
  options:
    format: csv
    load_pattern: cdc
    local_output_dir: ./output

silver:
  enabled: true

  entity_kind: event             # CDC feed contains discrete change events
  input_mode: append_log         # Bronze appends new change files
  delete_mode: tombstone_event
  schema_mode: strict

  natural_keys:
    - order_id

  event_ts_column: changed_at    # CDC records include a change timestamp
  change_ts_column: changed_at

  attributes:
    - customer_id
    - status
    - order_total
    - change_type

  partition_by:
    - changed_at_dt
